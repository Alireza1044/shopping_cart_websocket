[{"/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/index.js":"1","/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/App.js":"2","/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/reportWebVitals.js":"3"},{"size":500,"mtime":1610050294679,"results":"4","hashOfConfig":"5"},{"size":6424,"mtime":1610721392000,"results":"6","hashOfConfig":"5"},{"size":362,"mtime":1610050294679,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"2mby",{"filePath":"11","messages":"12","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"13","usedDeprecatedRules":"14"},{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/index.js",[],["17","18"],"/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/App.js",["19","20","21","22","23","24","25","26","27","28","29","30","31"],"import logo from './logo.svg';\nimport react, { Component } from 'react';\nimport './App.css';\nimport ReactDOM from 'react-dom';\nimport io from 'socket.io-client';\nimport { Button } from 'semantic-ui-react';\nimport Cookies from 'js-cookie';\nimport zlib from 'react-zlib-js';\nimport pako from 'pako';\nimport urlsafe_b64 from 'urlsafe-base64';\nimport { encode, decode, Base64 } from 'js-base64';\n\n\nclass App extends Component {\n    constructor (props) {\n        super(props);\n        this.state = {\n        products: [],\n        cart: [],\n        endpoint: \"http://127.0.0.1:5000\"\n        }\n        this.socket = null;\n        this.handleClick = this.handleClick.bind(this);\n        this.handleClickRemove = this.handleClickRemove.bind(this);\n        \n    }\n    \n    \n    componentDidMount() {\n        console.log('I was triggered during componentDidMount')\n        const { endpoint } = this.state;\n        \n        fetch('http://127.0.0.1:5000/shop/',{method: 'GET',\n            credentials: \"include\"})\n        .then(response => response.json())\n        .then(data => {\n            this.setState({products : data})\n            console.log(\"FUCKING HTTP\");\n            console.log('products');\n            console.log(this.state.products);\n            console.log('data');\n            console.log(data);\n        });\n        this.socket = io(this.state.endpoint);\n        \n        \n        console.log(\"coooooookie\");\n        let data = Cookies.get('session');\n//        console.log(data);\n//        var compressed = false;\n//        if (data){\n//            if (data.substring(0, 1) == \".\"){\n//                compressed = true;\n//                data = data.slice(1);\n//                console.log(\"SLiced\");\n//                console.log(data);\n//            }\n//            data = data.split(\".\")[0];\n//            data = urlsafe_b64.decode(data);\n//            console.log(data);\n//            if (compressed){\n//                data = pako.inflate(data, { to: 'string' });\n//            }\n//            data = JSON.parse(data);\n//            console.log(data);\n//            console.log(\"done\");\n//            console.log(data.cart);\n//            this.setState({cart: data.cart})\n//        }\n        \n        this.socket.emit(\"get-cart\", {owner: data}, function(idp){\n            console.log(\"sadsadfdfskklndkasflslkdd\");\n            console.log(data);\n        });\n        \n        \n        if(this.socket){\n        this.socket.on(\"update_prod\",(data) => {\n            this.setState({products: data})\n            console.log(this.state.products);\n        });\n        \n        this.socket.on(\"update_cart\",(data) => {\n            this.setState({cart: data})\n            console.log(this.state.products);\n        });\n        }\n    }\n    \n    handleClick(e,idprod) {\n        e.preventDefault();\n        let data = Cookies.get('session');\n        this.socket.emit(\"added-to-cart\", {owner: data, id : idprod}, function(idp){\n            console.log(\"sadsad add aadd ad add\");\n            console.log(idprod);\n            console.log(data);\n        });\n    }\n    \n    handleClickRemove(e,idprod) {\n        e.preventDefault();\n        let data = Cookies.get('session');\n        this.socket.emit(\"removed-from-cart\", {owner: data, id : idprod}, function(idps){\n            console.log(idprod);\n        });\n    }\n    \n    handleClickCheckout(e) {\n        e.preventDefault();\n        let data = Cookies.get('session');\n        this.socket.emit(\"checkout\", {owner: data}, function(idp){\n            console.log(\"checkout\");\n            console.log(data);\n        });\n    }\n    \n    renderTableDataProducts(where) {\n        return where.map((student, index) => {\n            const { id, name, price, quantity } = student //destructuring\n            return (\n                    <tr key={id}>\n                    <td>{id}</td>\n                    <td>{name}</td>\n                    <td>{price}</td>\n                    <td>{quantity}</td>\n                    <td><button key={id} width='50px' height='50px' onClick={(e) => this.handleClick(e,id)}>Add</button></td>\n                    </tr>\n                    )\n        })\n    }\n    \n    renderTableDataCart(where) {\n        if (where){\n            if(where[0]){\n                let header = Object.keys(where[0]);\n                var f = where[0];\n                return where.map((key, index) => {\n                    const { id, name, price, quantity } = key; //destructuring\n                    var ref_tag = `${id}_remove`;\n                    return (\n                            <tr key={id}>\n                            <td>{id}</td>\n                            <td>{name}</td>\n                            <td>{price}</td>\n                            <td>{quantity}</td>\n                            <td><button key={id} width='50px' height='50px' onClick={(e) => this.handleClickRemove(e,id)}>Remove</button></td>\n                            </tr>\n                            )\n                })\n            }\n        }\n    }\n    \n    renderTableHeaderCart(where) {\n        if(where[0]){\n            let header = Object.keys(where[0]);\n            return header.map((key, index) => {\n                return <th key={index}>{key.toUpperCase()}</th>\n            })\n        }\n    }\n    \n    renderTableHeader(where) {\n        if(where[0]){\n            let header = Object.keys(where[0])\n            return header.map((key, index) => {\n                return <th key={index}>{key.toUpperCase()}</th>\n            })\n        }\n    }\n    \n    render() {\n        return (\n                <div>\n                <h1 id='title'>Products List</h1>\n                <table id='students'>\n                <tbody>\n                <tr>{this.renderTableHeader(this.state.products)}</tr>\n                {this.renderTableDataProducts(this.state.products)}\n                </tbody>\n                </table>\n                \n                <h1 id='title'>Shopping Cart</h1>\n                <table id='students'>\n                <tbody>\n                <tr>{this.renderTableHeaderCart(this.state.cart)}</tr>\n                {this.renderTableDataCart(this.state.cart)}\n                </tbody>\n                </table>\n                <button key=\"checkout\" width='50px' height='50px' onClick={(e) => this.handleClickCheckout(e)}>Checkout</button>\n                </div>\n                )\n    }\n}\n\nReactDOM.render(<table />, document.getElementById('root'));\n                export default App;\n",["32","33"],"/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/reportWebVitals.js",[],{"ruleId":"34","replacedBy":"35"},{"ruleId":"36","replacedBy":"37"},{"ruleId":"38","severity":1,"message":"39","line":1,"column":8,"nodeType":"40","messageId":"41","endLine":1,"endColumn":12},{"ruleId":"38","severity":1,"message":"42","line":2,"column":8,"nodeType":"40","messageId":"41","endLine":2,"endColumn":13},{"ruleId":"38","severity":1,"message":"43","line":6,"column":10,"nodeType":"40","messageId":"41","endLine":6,"endColumn":16},{"ruleId":"38","severity":1,"message":"44","line":8,"column":8,"nodeType":"40","messageId":"41","endLine":8,"endColumn":12},{"ruleId":"38","severity":1,"message":"45","line":9,"column":8,"nodeType":"40","messageId":"41","endLine":9,"endColumn":12},{"ruleId":"38","severity":1,"message":"46","line":10,"column":8,"nodeType":"40","messageId":"41","endLine":10,"endColumn":19},{"ruleId":"38","severity":1,"message":"47","line":11,"column":10,"nodeType":"40","messageId":"41","endLine":11,"endColumn":16},{"ruleId":"38","severity":1,"message":"48","line":11,"column":18,"nodeType":"40","messageId":"41","endLine":11,"endColumn":24},{"ruleId":"38","severity":1,"message":"49","line":11,"column":26,"nodeType":"40","messageId":"41","endLine":11,"endColumn":32},{"ruleId":"38","severity":1,"message":"50","line":31,"column":17,"nodeType":"40","messageId":"41","endLine":31,"endColumn":25},{"ruleId":"38","severity":1,"message":"51","line":135,"column":21,"nodeType":"40","messageId":"41","endLine":135,"endColumn":27},{"ruleId":"38","severity":1,"message":"52","line":136,"column":21,"nodeType":"40","messageId":"41","endLine":136,"endColumn":22},{"ruleId":"38","severity":1,"message":"53","line":139,"column":25,"nodeType":"40","messageId":"41","endLine":139,"endColumn":32},{"ruleId":"34","replacedBy":"54"},{"ruleId":"36","replacedBy":"55"},"no-native-reassign",["56"],"no-negated-in-lhs",["57"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'react' is defined but never used.","'Button' is defined but never used.","'zlib' is defined but never used.","'pako' is defined but never used.","'urlsafe_b64' is defined but never used.","'encode' is defined but never used.","'decode' is defined but never used.","'Base64' is defined but never used.","'endpoint' is assigned a value but never used.","'header' is assigned a value but never used.","'f' is assigned a value but never used.","'ref_tag' is assigned a value but never used.",["56"],["57"],"no-global-assign","no-unsafe-negation"]