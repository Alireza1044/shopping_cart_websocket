[{"/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/index.js":"1","/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/App.js":"2","/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/reportWebVitals.js":"3"},{"size":500,"mtime":1610050294679,"results":"4","hashOfConfig":"5"},{"size":5822,"mtime":1610135954418,"results":"6","hashOfConfig":"5"},{"size":362,"mtime":1610050294679,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"2mby",{"filePath":"11","messages":"12","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"13","usedDeprecatedRules":"10"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/index.js",[],["16","17"],"/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/App.js",["18","19","20","21","22","23","24","25","26","27"],"import logo from './logo.svg';\nimport react, { Component } from 'react';\nimport './App.css';\nimport ReactDOM from 'react-dom';\nimport io from 'socket.io-client';\nimport { Button } from 'semantic-ui-react';\nimport Cookies from 'js-cookie';\nimport zlib from 'react-zlib-js';\nimport pako from 'pako';\nimport urlsafe_b64 from 'urlsafe-base64';\nimport { encode, decode, Base64 } from 'js-base64';\n\n\nclass App extends Component {\n    constructor (props) {\n        super(props);\n        this.state = {\n        products: [],\n        cart: [],\n        endpoint: \"http://127.0.0.1:5000\"\n        }\n        this.handleClick = this.handleClick.bind(this);\n        this.handleClickRemove = this.handleClickRemove.bind(this);\n        this.socket = io(this.state.endpoint)\n    }\n    \n    \n    componentDidMount() {\n        console.log('I was triggered during componentDidMount')\n        const { endpoint } = this.state;\n        \n        fetch('http://127.0.0.1:5000/shop/',{method: 'GET',\n            credentials: \"include\"})\n        .then(response => response.json())\n        .then(data => { this.setState({ products: data })\n            console.log('products');\n            console.log(this.state.products);\n            console.log('data');\n            console.log(this.data);\n        });\n        \n        console.log(\"coooooookie\");\n        let data = Cookies.get('session');\n        console.log(data);\n        var compressed = false;\n        if (data){\n            if (data.substring(0, 1) == \".\"){\n                compressed = true;\n                data = data.slice(1);\n                console.log(\"SLiced\");\n                console.log(data);\n            }\n            data = data.split(\".\")[0];\n            data = urlsafe_b64.decode(data);\n            console.log(data);\n            if (compressed){\n                data = pako.inflate(data, { to: 'string' });\n            }\n            data = JSON.parse(data);\n            console.log(data);\n            console.log(\"done\");\n            console.log(data.cart);\n            this.setState({cart: data.cart})\n        }\n        \n        \n        this.socket.on(\"update_prod\",(data) => {\n            this.setState({products: data})\n            console.log(this.state.products);\n        });\n        \n        this.socket.on(\"update_cart\",(data) => {\n            this.setState({cart: data})\n            console.log(this.state.products);\n        });\n    }\n    \n    handleClick(e,idprod) {\n        e.preventDefault();\n        this.socket.emit(\"added-to-cart\", {id : idprod}, function(idp){\n            console.log(idprod);\n        });\n    }\n    \n    handleClickRemove(e,idprod) {\n        e.preventDefault();\n        this.socket.emit(\"removed-from-cart\", {id : idprod}, function(idps){\n            console.log(idprod);\n        });\n    }\n    \n    handleClickCheckout(e) {\n        e.preventDefault();\n        this.socket.emit(\"checkout\");\n    }\n    \n    renderTableDataProducts(where) {\n        return where.map((student, index) => {\n            const { id, name, price, quantity } = student //destructuring\n            return (\n                    <tr key={id}>\n                    <td>{id}</td>\n                    <td>{name}</td>\n                    <td>{price}</td>\n                    <td>{quantity}</td>\n                    <td><button key={id} width='50px' height='50px' onClick={(e) => this.handleClick(e,id)}>Add</button></td>\n                    </tr>\n                    )\n        })\n    }\n    \n    renderTableDataCart(where) {\n        if (where){\n            if(where[0]){\n                let header = Object.keys(where[0]);\n                var f = where[0];\n                return header.map((key, index) => {\n                    const { id, name, price, quantity } = f[key]; //destructuring\n                    var ref_tag = `${id}_remove`;\n                    return (\n                            <tr key={id}>\n                            <td>{id}</td>\n                            <td>{name}</td>\n                            <td>{price}</td>\n                            <td>{quantity}</td>\n                            <td><button key={id} width='50px' height='50px' onClick={(e) => this.handleClickRemove(e,id)}>Remove</button></td>\n                            </tr>\n                            )\n                })\n            }\n        }\n    }\n    \n    renderTableHeaderCart(where) {\n        if(where[0]){\n            let header = Object.keys(where[0]);\n            var k = header[0];\n            var f = where[0];\n                return Object.keys(f[k]).map((key, index) => {\n                    return <th key={index}>{key.toUpperCase()}</th>\n                })\n        }\n    }\n    \n    renderTableHeader(where) {\n        if(where[0]){\n            let header = Object.keys(where[0])\n            return header.map((key, index) => {\n                return <th key={index}>{key.toUpperCase()}</th>\n            })\n        }\n    }\n    \n    render() {\n        return (\n                <div>\n                <h1 id='title'>Products List</h1>\n                <table id='students'>\n                <tbody>\n                <tr>{this.renderTableHeader(this.state.products)}</tr>\n                {this.renderTableDataProducts(this.state.products)}\n                </tbody>\n                </table>\n                \n                <h1 id='title'>Shopping Cart</h1>\n                <table id='students'>\n                <tbody>\n                <tr>{this.renderTableHeaderCart(this.state.cart)}</tr>\n                {this.renderTableDataCart(this.state.cart)}\n                </tbody>\n                </table>\n                <button key=\"checkout\" width='50px' height='50px' onClick={(e) => this.handleClickCheckout(e)}>Checkout</button>\n                </div>\n                )\n    }\n}\n\nReactDOM.render(<table />, document.getElementById('root'));\n                export default App;\n","/Users/pooya/Documents/Academic/University/Semester 7/Internet Engineering/Mini Project 3/websocket/front/src/reportWebVitals.js",[],{"ruleId":"28","replacedBy":"29"},{"ruleId":"30","replacedBy":"31"},{"ruleId":"32","severity":1,"message":"33","line":1,"column":8,"nodeType":"34","messageId":"35","endLine":1,"endColumn":12},{"ruleId":"32","severity":1,"message":"36","line":2,"column":8,"nodeType":"34","messageId":"35","endLine":2,"endColumn":13},{"ruleId":"32","severity":1,"message":"37","line":6,"column":10,"nodeType":"34","messageId":"35","endLine":6,"endColumn":16},{"ruleId":"32","severity":1,"message":"38","line":8,"column":8,"nodeType":"34","messageId":"35","endLine":8,"endColumn":12},{"ruleId":"32","severity":1,"message":"39","line":11,"column":10,"nodeType":"34","messageId":"35","endLine":11,"endColumn":16},{"ruleId":"32","severity":1,"message":"40","line":11,"column":18,"nodeType":"34","messageId":"35","endLine":11,"endColumn":24},{"ruleId":"32","severity":1,"message":"41","line":11,"column":26,"nodeType":"34","messageId":"35","endLine":11,"endColumn":32},{"ruleId":"32","severity":1,"message":"42","line":30,"column":17,"nodeType":"34","messageId":"35","endLine":30,"endColumn":25},{"ruleId":"43","severity":1,"message":"44","line":47,"column":38,"nodeType":"45","messageId":"46","endLine":47,"endColumn":40},{"ruleId":"32","severity":1,"message":"47","line":119,"column":25,"nodeType":"34","messageId":"35","endLine":119,"endColumn":32},"no-native-reassign",["48"],"no-negated-in-lhs",["49"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'react' is defined but never used.","'Button' is defined but never used.","'zlib' is defined but never used.","'encode' is defined but never used.","'decode' is defined but never used.","'Base64' is defined but never used.","'endpoint' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'ref_tag' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]